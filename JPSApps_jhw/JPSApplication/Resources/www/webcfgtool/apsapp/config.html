<html>
    <head>
		<!-- Style Sheet -->
        <link type="text/css" rel="stylesheet" href="../css/bootstrap.min.css" />
        <link type="text/css" href="../css/alpaca.min.css" rel="stylesheet" />
		<style>
		.no-js #loader { display: none;  }
		.js #loader { display: block; position: absolute; left: 100px; top: 0; }
		.se-pre-con {
			position: fixed;
			left: 0px;
			top: 0px;
			width: 100%;
			height: 100%;
			z-index: 9999;
			background: url(../images/Preloader_8.gif) center no-repeat #fff;
		}
		</style>
		<style>
		legend {color: rgba(72, 123, 99, 0.95);}
		label {color: rgba(80, 131, 107, 0.95);}
		.alpaca-field-object {
			border: 3px solid rgba(72, 123, 99, 0.55);
			border-radius: 4px;
			padding: 10px;
		}
		.alpaca-field-array {
			border: 3px solid rgba(72, 123, 99, 0.55);
			border-radius: 4px;
			padding: 10px;
		}
		document.body.style.zoom="75%"
		</style>
		<!-- Basic Javascript -->
        <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" src="../js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../js/handlebars.js"></script>
        <script type="text/javascript" src="../js/alpaca.min.js"></script>
		<script type="text/javascript" src="../js/modernizr.js"></script>
		<script type="text/javascript" src="../js/FileSaver.min.js"></script>
		<script type="text/javascript">
		function delayedFadeOut() {
			$(".se-pre-con").fadeOut("slow");
		}
		</script>
		<script type="text/javascript">
			Alpaca.views["bootstrap-edit"].callbacks["collapsible"] = function() {
			var $fieldEl = $(this.getFieldEl());
			var $legendEl = $fieldEl.find("legend").first();
			var $anchorEl = $("[data-toggle='collapse']", $legendEl);
			if ($anchorEl.length > 0) {
				var $containerEl = $(this.getContainerEl());
				var id = $containerEl.attr("id");
				if (!id) {
					id = Alpaca.generateId();
					$containerEl.attr("id", id);
				}
				$anchorEl.attr("aria-expanded", this.options.collapsed ? "false" : "true");
				$containerEl.addClass(this.options.collapsed ? "collapse" : "collapse in");
				if (!$anchorEl.attr("data-target")) {
					$anchorEl.attr("data-target", "#" + id);
				}
				$anchorEl.mouseover(function(e) {
					$(this).css("cursor", "pointer");
				})
			}
		};
		</script>
		<script type="text/javascript">
		function requestUrl(url) {
			window.location = url;
		};
		function updateCurrency(curr) {
			var request = new XMLHttpRequest();
			request.onreadystatechange = function()
			{
				if (this.readyState === 4)
				{
					//alert(request.response);
					if(this.status == 500){alert(request.response);}
					else                  {location.reload(true);  }
				}
			}
			request.open("POST", ("/webcfgtool/currencies/app/" + curr));
			request.send();
		};
		</script>
    </head>
    <body>
		<div class="se-pre-con"></div>
        <div id="form"></div>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#form").alpaca({
					"dataSource": "./ApsApp/ConfigData.json",
					"schemaSource": "./ConfigSchema.json",
					"view":"bootstrap-edit-horizontal",
					/////////////////////////////////////////////////////////////// RENDERING OPTIONS ////////////////////////////////////////////////////
                    "options":
					{
					    "form":{
                            "attributes":{
                                "action":"/webcfgtool",
                                "method":"post"
                            },
                            "buttons":{
								"validate":{
                                    "title": "Validate",
                                    "click": function() {
                                        var val = this.getValue();
                                        if (this.isValid(true)) {
											var myjson= JSON.stringify(val, null, "  ");
											var blob = new Blob([myjson], {type: "application/json"});
											var filename = 'ConfigData.json.ck';
											var formData = new FormData();
											formData.append('file', new File([blob], filename, {type:"text/plain;charset=unicode"}),);
											var request = new XMLHttpRequest();
											request.onreadystatechange = function() { if (request.readyState === 4) { alert(request.response); }}
											request.open("POST", "/webcfgtool/ckjpsapp");
											request.setRequestHeader("periphtype","0x30000000");
											request.send(formData);
                                        } else {
											var errors = "";
                                            $(".alpaca-invalid").each(function(){
												errors = errors +";\n"+$(this).attr("data-alpaca-field-path");
											});
											alert("Invalid value in: " + errors);
                                        }
                                    }
                                },
                                "submit":{
                                    "title": "Send Configuration",
                                    "click": function() {
                                        var val = this.getValue();
                                        if (this.isValid(true)) {
											var myjson= JSON.stringify(val, null, "  ");
											var blob = new Blob([myjson], {type: "application/json"});
											var filename = 'ConfigData.json.def';
											var formData = new FormData();
											formData.append('file', new File([blob], filename, {type:"text/plain;charset=unicode"}),);
											var request = new XMLHttpRequest();
											request.onreadystatechange = function() {if (request.readyState == XMLHttpRequest.DONE) {alert(request.responseText);}}
											request.open("POST", "/webcfgtool/jpsapp");
											request.setRequestHeader("periphtype","0x30000000");
											request.send(formData);
                                        } else {
                                            alert("Invalid value: " + JSON.stringify(val, null, "  "));
                                        }
                                    }
                                }
                            }
                        },
                        "fields":
						{
							/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION ////////////////////////////////////////////////////
							"application":
							{
								"helper": "Use the following forms to configure the Automatic Pay Station Application",
								"fields":
								{
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SPECTYPE ////////////////////////////////////////////////////
									"spectype":{"helper":"The Application Type (always 6 for ApsApp).","disabled":true},
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SITECODE ////////////////////////////////////////////////////
									"sitecode":{"helper":"Enter the parking site code."},
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.PERIPHID ////////////////////////////////////////////////////
									"periphid":{"helper":"The unique peripheral ID","placeholder":"es. 80-0C-29-9C-B3-32"},
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.CURRENCY ////////////////////////////////////////////////////
									"runmode" :  { "helper": "The default running mode of the application", },
									"dbgsegflt":{"helper": "Enable SegFault Debug"},
									"logmaxage":{"helper":"The maximum log files retention in days in [1,365]."},
									"loglevel":   {"helper":"Set the log verbosity (0=Debug, 1=Info, 2=Warning, 3=Critical, 4=Fatal)."},
									"dbglevel":	  {"helper":"Set the debug verbosity (0=Debug, 1=Info, 2=Warning, 3=Critical, 4=Fatal)."},
									"tmpscrntm":{"helper":" Duration (in ms) of a temporary display screen."},
									"fraudalrmtm":{"helper":" Time (in ms) required to trigger fraud alarm after a door open event."},
									"backtoidletm":{"helper":" Time (in ms) required to trigger a back to idle action."},
									"currency" : { "helper": "The default parking currency","events": { "change": function () { updateCurrency(this.getValue()); }}},
									"amoprecis" :{ "helper": "The minimum decimal precision to be guaranted for amounts."},
									"locvalen": {"helper": "Enable/Disable Local Validation"},
									"iponopen": {"helper": "Shows/Hides IP On Door Opened"},
									"freetime" : { "helper": "Maximum parking time without charge"},
									"exittime" : { "helper": "Maximum payment to exit time without further charge"},
									"costtime" : { "helper": "The default cost for minute"},
									"lostmode"   : { "helper": "0 -> 'No Lost', 1 -> 'Lost On Off Line', 2 -> 'Lost Always'"},
									"loststrttm" : { "helper": "The time of the current day used as start time for lost price computation"},
									"lostcosttm" : { "helper": "The amount used as flat lost price"},
									"taxpctge" : { "helper": "The default tax percentage applyed to the parking price"},
									"prntsnapmode":{"helper": "Cash snapshots printing mode (0=Disabled, 1=Delta Only If Any, 2=Always All)."},
									"prntrcptmode":{"helper": "Cash receipt printing mode (0=Disabled, 1=Pos Only, 2=Always All)."},
									"showextm" : { "helper": "Shows/Hides exit time left after a payment "},
									"showposmsg": {"helper": "Shows/Hides  the 'pos messages' "},
									"showmaxchange": {"helper": "Shows/Hides the 'max change deliverable' option on the display"},
									"discntmode" : { "helper": "Discunt support mode (0=Disabled, 1=On Pre Pay, 2=On Armed Pay)."},
									"paytktgrace" : { "helper": "Mark tickets as paid in grace(free) period"},
									"acceptpaidtkt" : { "helper": "Enables the payment of already paid tickets"},
									"zerorcp" : { "helper": "Enable/Disable the printing of receipts for zero amount"},
									"ticketdesc": {"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":false, "helper":" Configure the descriptors, printed on the ticket"},
									"receiptdesc": {"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":false, "helper":" Configure the descriptors (headers), printed on the receipt"},
									"vendingmngmt": {"collapsible":true, "collapsed":true, "fields": {"mode": {"helper": "Options: '0' = Vending Disabled, '1' =  Vending Always Enabled, '2' =  Vending Based On Parking Time"}, "maxparktm": {"helper": "When in 'Parking Time Based' mode, the maximum parking time within which the sale is allowed"}}},
									"pymtopts" : { "helper": "Available Payment Options", "collapsible":true, "collapsed":true},
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.PERSISTDATA ////////////////////////////////////////////////////
									"persistentdata":{"collapsible":true, "collapsed":true, "fields": {"dbfilesizekb": {"type":"hidden"}, "dbtables": {"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true}}},
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.DEVICES ////////////////////////////////////////////////////
									"devices" :
									{
										"fields":
										{
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.DEVICES.GIOCTRL ////////////////////////////////////////////////////
											"gpioctrl":
											{
												"collapsible":true,
												"collapsed":true,
												"helper": "Here you can set the properties of the currently used GPIO controller",
												"fields":
												{
													"spectype":{ "helper": "Options: '0' =  Gpio Ctrl Not Present, '1' =  KeyBoard, '2' =  RaspberryPi, '3' =  EbbSimulator, '4' = EbbConnector" },
													"pollingtimems":{ "helper": "min 50 ms, max 100" },
													"cfgmasks":
													{
														"collapsible":true,
														"collapsed":true,
														"helper": "Here you can configure the basic GPIO controller masks",
														"toolbarSticky":true,
														"type":"table",
														"showActionsColumn":true,
													},
													"communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"disabled":false}, "url":{"helper": "IP:PORT"}}}
												}
											},
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.DEVICES.DISPLAY ////////////////////////////////////////////////////
											"display":
											{
												"collapsible":true,
												"collapsed":true,
												"fields":
												{
													"spectype":{"helper": "Options: '0' =  Display Not Present, '1' =  EGU, '2' =  ZEGU, '3' =  GEGU"},
													"periphmode":{"helper": "Options: '0' = DispModeLe, '1' = DispModeLx, '2' = DispModeAps, '3' = DispModeApl"},
													"dateformat":{"helper": "Options: '0' =  EU, '1' =  US"},
													"langsfile":{"helper": "Languages file used for localization"},
													"langslist": {"helper": "Enabled languages list", "collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true},
													"runmodests": {"helper": "Default screen to be shown by current run mode", "collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true},
													"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } },
													/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.DEVICES.DISPLAY.GIOCTRL ////////////////////////////////////////////////////
													"gpioctrl":
													{
														"collapsible":true,
														"collapsed":true,
														"helper": "Here you can set the properties of the currently used GPIO controller",
														"fields":
														{
															"spectype":{ "helper": "Options: '0' =  Gpio Ctrl Not Present, '1' =  KeyBoard, '2' =  RaspberryPi, '3' =  EbbSimulator, '4' = EbbConnector" },
															"pollingtimems":{ "helper": "min 50 ms, max 100" },
															"cfgmasks":
															{
																"collapsible":true,
																"collapsed":true,
																"helper": "Here you can configure the basic GPIO controller masks",
																"toolbarSticky":true,
																"type":"table",
																"showActionsColumn":true,
															},
															"communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"disabled":false}, "url":{"helper": "IP:PORT"}}}
														}
													},
													"ctrlpins":{"collapsible":true,"collapsed":true, "type":"table","showActionsColumn":true}
												}												
											},
											"statpins":{"collapsible":true,"collapsed":true, "type":"table","showActionsColumn":true},
											"ctrlpins":{"collapsible":true,"collapsed":true, "type":"table","showActionsColumn":true},
											"floorcnt":{"collapsible":true,"collapsed":true,"helper": "Here you can set the pin ID of the GPIO pins, used for floor counting","showActionsColumn":true}
										}
									},
									/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES ////////////////////////////////////////////////////
									"services" :
									{
										"fields":
										{
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.LOCALDB ////////////////////////////////////////////////////
											"localdbservice":
											{
												"collapsible":true, 
												"collapsed":true,
												"fields":
												{ 
													"spectype":{"helper": "Options: '0' =  Lane Not Present, '1' = Lane Over Gpio"},
													"dburls":
													{
														"collapsible":true,
														"collapsed":true, 
														"type":"table",
														"showActionsColumn":true,														
													}
												}
											},
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.JPSADMIN ////////////////////////////////////////////////////
											"jpsadminservice":
											{
												"collapsible":true, 
												"collapsed":true,
												"fields":
												{
													"spectype":{"helper": "Options: '0' =  Not Present, '1' = Present"},
													"loginon":{"helper": "Options: 'false' = Login Enabled On Open Door, 'true' = Login Always Enabled"},
													"httpserver": {"collapsible":true, "collapsed":true, "fields": { "communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"type":"hidden"}, "url":{"helper": "IP:PORT"}}}}}
												}
											},
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.JBLSERVICE ////////////////////////////////////////////////////
											"jblservice":
											{
												"collapsible":true,
												"collapsed":true,
												"fields":
												{
													"spectype":{"helper": "Options: '0' =  Not Present, '1' = Present"},
													"persistentdata":{"collapsible":true, "collapsed":true, "fields": {"dbfilesizekb": {"type":"hidden"}, "dbtables": {"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true}}},
													"httpserver": {"collapsible":true, "collapsed":true, "fields": { "communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"type":"hidden"}, "url":{"helper": "IP:PORT"}}}}},
													"httpclient": {"collapsible":true, "collapsed":true, "fields": { "communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"type":"hidden"}, "url":{"helper": "IP"}}}}}
												}
											},
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.PAYMENTSERVICE ////////////////////////////////////////////////////
											"paymentservice":
											{
												"collapsible":true,
												"collapsed":true,
												"fields":
												{
													"spectype":  {"helper": "Options: '0' =  Not Present, '1' = Present"},
													"pymtmode":  {"helper": "Options: '0' =  Cash, '1' = Pos, '2' = Cash&Pos"},
													"cngalgo":   {"helper": "Options: '0' =  Minimize Pieces, '1' = Balanced Pieces"},
													"maxchange": {"helper": "Change amount upper limit"},
													"maxpieces": {"helper": "Change pieces upper limit"},
													"maxcngrtry":{"helper": "Change attempts max number"},
													"cngonabrt": {"helper": "Options: '0' =  No Change On Abort, '1' = Give Change On Abort"},
													"armedtmts": {"helper": "Time (in secs) before to quit an armed payment"},
													"runngtmts": {"helper": "Time (in secs) before to quit a running payment"},
													"carddeten": {"helper": "Options: '0' =  Card Detect Disabled, '1' = Card Detect Enabled"},
													"dspuflwen": {"helper": "Options: '0' =  Dispense Underflow Disabled, '1' = Dispense Underflow Enabled"},
													"cashiermd": {"helper": "Options: '0' =  'Web Interface', '1' = 'Automatic', '2' = 'Both Web and Auto'"},
													"devices":
													{
														"collapsible":true,
														"collapsed":true, 
														"fields": 
														{ 
															/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.MODULES.CPGW ////////////////////////////////////////////////////
															"cpgw": 
															{
																"collapsible":true,
																"collapsed":true,
																"fields":
																{
																	"spectype":{"helper": "Options: '0' =  Not Present, '1' = Present"},
																	"src":{"helper": "The user friendly name of the CPGW"},
																	"dst":{"helper": "The user friendly name of the target treminal"},
																	"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "NETWORK=IP:PORT"} } }
																}
															},											
															////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.MODULES.SGP ////////////////////////////////////////////////////
															"sgp":
															{
																"collapsible":true,
																"collapsed":true,
																"fields":
																{
																	"spectype":{"helper": "Options: '0' =  Not Present, '1' =  Present"},
																	/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.MODULES.SGP.GIOCTRL ////////////////////////////////////////////////////
																	"core":
																	{
																		"collapsible":true,"collapsed":true,
																		"fields":
																		{
																			"gpioctrl":
																			{
																				"collapsible":true,
																				"collapsed":true,
																				"helper": "Here you can set the properties of the curently used GPIO controller",
																				"fields":
																				{
																					"spectype":{ "helper": "Options: '0' =  Gpio Ctrl Not Present, '1' =  KeyBoard, '2' =  RaspberryPi, '3' =  EbbSimulator, '4' = EbbConnector" },
																					"pollingtimems":{ "helper": "min 50 ms, max 100" },
																					"cfgmasks":{"collapsible":true,"collapsed":true,"helper": "Here you can configure the basic GPIO controller masks","toolbarSticky":true,"type":"table","showActionsColumn":false},
																					"communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"disabled":false}, "url":{"helper": "IP:PORT"}}}
																				}
																			},
																			"statpins": { "collapsible":true, "collapsed":true,  "type":"table", "showActionsColumn":true},
																			"ctrlpins": { "collapsible":true, "collapsed":true,  "type":"table", "showActionsColumn":true}
																		}
																	},
																	"acoin":{"collapsible":true,"collapsed":true,
																	         "fields":{"spectype":{"helper": "Options: '0' =  Not Present, '1' = Mei(Plus Matic Cfg), '2' = EagleV2(Plus Matic Cfg), '3' = EagleV2(EBB Cfg)"},"denominations":{"collapsible":true,"collapsed":true,"type":"table","showActionsColumn":true,"actionbar": {"actions": [{"action": "add","enabled": false}, {"action": "remove","enabled": false}]}},"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"}}}}},
																	"abill":{"collapsible":true,"collapsed":true,
																	         "fields":{"spectype":{"helper": "Options: '0' =  Not Present, '2' = Mei SC83, '3' = CashCode Bill to Bill"},"denominations":{"collapsible":true,"collapsed":true,"type":"table","showActionsColumn":true,"actionbar": {"actions": [{"action": "add","enabled": false}, {"action": "remove","enabled": false}]}},"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"}}}}},
																	"dcoin":{"collapsible":true,"collapsed":true,
																	         "fields":{"spectype":{"helper": "Options: '0' =  Not Present, '1' = Old (Plus Matic Cfg), '2' = Microard X5 (EBB Cfg)"},"denominations":{"collapsible":true,"collapsed":true,"type":"table","showActionsColumn":true,"actionbar": {"actions": [{"action": "add","enabled": false}, {"action": "remove","enabled": false}]}},"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"}}}}},
																	"dbill":{"collapsible":true,"collapsed":true,
																	         "fields":{"spectype":{"helper": "Options: '0' =  Not Present, '1' = F53 (EBB Cfg), '3' = CashCode Bill to Bill"},"denominations":{"collapsible":true,"collapsed":true,"type":"table","showActionsColumn":true,"actionbar": {"actions": [{"action": "add","enabled": false}, {"action": "remove","enabled": false}]}},"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"}}}}},
																	"bill2bill":{"collapsible":true,"collapsed":true,
																			 "fields":{"inuse":{"helper": "Enable/disable the usage of the Bill2Bill, when the Bill2Bill is NOT operational"},"oosenabled":{"helper": "Enable/disable going in mode 'OutOfService' when the Bill2Bill device is NOT operational"}},
																	         "fields":{"oosenabled":{"helper": "Enable/disable going in mode 'OutOfService' when the Bill2Bill device is NOT operational"}},
																			 "unldenabled":{"helper": "Enable/disable the 'Unload' operation of the Bill2Bill recyclable cassettes"},
																			 "unldtm":{"helper": "Time (in min) after which the 'Unload' Bill2Bill operation could be started"}
																			 },
																	"cashmngr":{"collapsible":true,"collapsed":true,
																				"fields":{
																				/////////////////////////////////////////////////////////////// RENDERING OPTIONS ////////////////////////////////////////////////////
																				"persistentdata":{"collapsible":true, "collapsed":true, "fields": {"dbfilesizekb": {"type":"hidden"}, "dbtables": {"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true}}},
																				"coins":{"helper": "EBB: 'A->H1, B->H2, C->H3, D->H4, E->MixedCash', Plus Matic: 'E->H1, F->H2, G->H3, H->MixedCash', ","collapsible":true,"collapsed":true,"type":"table","showActionsColumn":false, "fields":{"srcs":{"collapsible":true,"collapsed":true,"type":"table","showActionsColumn":true}}},
																				"bills":{"helper": "EBB: 'A->H1, B->H2, ?->MixedCash'","collapsible":true,"collapsed":true,"type":"table","showActionsColumn":false, "fields":{"srcs":{"collapsible":true,"collapsed":true,"type":"table","showActionsColumn":true}}}}}
																}
															}
														}
													}
												}
											},
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.TARIFFS ////////////////////////////////////////////////////
											"tariffsservice":
											{
												"collapsible":true, 
												"collapsed":true,
												"fields": { "sitecode":{"type":"hidden"}, "httpserver": {"collapsible":true, "collapsed":true, "fields": { "communication": { "collapsible":true, "collapsed":true, "fields": {"spectype":{"type":"hidden"}, "url":{"helper": "IP:PORT"}}}}}},
											},
											/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS ////////////////////////////////////////////////////
											"usrpassservice":
											{
												"collapsible":true, 
												"collapsed":true,
												"fields": 
												{
													"spectype":{"helper": "Options: '0' =  UsrPass Service Not Present, '1' = UsrPass Service Present"},
													"rcprightalign":{"helper": "If this option is enabled, the text of the receipt would be aligned on the right"},
													/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS.PRINTER ////////////////////////////////////////////////////
													"printer":
													{
														"collapsible":true,
														"collapsed":true,
														"fields":
														{
															"spectype":{"helper": "Options: '0' =  Not Present, '1' =  HengstlerX56"},
															"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } }
														}
													},
													/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS.FISCALPRINTER ////////////////////////////////////////////////////
													"fiscalprinter":
													{
														"collapsible":true,
														"collapsed":true,
														"fields":
														{
															"spectype":{"helper": "Options: '0' =  Not Present, '1' =  Datecs"},
															"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } }
														}
													},
													////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.MODULES.PROXYRDRWRTR ////////////////////////////////////////////////////
													"proxyrdrwrtr":
													{
														"collapsible":true,
														"collapsed":true,
														"fields":
														{
															"spectype":{"helper": "Options: '0' =  Not Present, '1' =  Present"},
															"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } }
														}
													},
													////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS.PROXYREADER ////////////////////////////////////////////////////
													"proxyreaders":
													{
														"collapsible":true,
														"collapsed":true,
														"helper": "Here you can set the properties of each Proxy Reader",
														"toolbarSticky":true,
														"fields":
														{
															"item" :
															{
																"fields":
																{
																	"spectype":{"helper": "Options: '0' =  Not Present, '1' =  ZeagHub, '2' =  UhfAt4"},
																	"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } }
																}
															}
														}
													},
													/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS.BLE ////////////////////////////////////////////////////
													"ble":
													{
														"collapsible":true,
														"collapsed":true,
														"fields":
														{
															"spectype":{"helper": "Options: '0' =  Not Present, '1' =  Present"},
															"parkbrand":{"helper": "Options: '0' =  FAAC, '1' =  ZEAG, '2' =  DATAPARK, '3' =  CRT, '4' =  HUB", },
															"periphmode":{"helper": "Options: '0' =  ENTRANCE, '1' =  EXIT, '2' =  APM_QR_ON_SMARTPHONE, '3' = APM_QR_ON_APM, '4' = APM_ON_PURE_BLE, '5' = APM_ON_NFC"},
															"runmodests": { "collapsible":true, "collapsed":true, "fields": { "item" : { "fields": { "runmode":{ "disabled":true }, } } } },
															"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } }
														}
													},
													////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS.BCREADER ////////////////////////////////////////////////////
													"bcreader":
													{
														"collapsible":true,
														"collapsed":true,
														"fields":
														{
															"spectype":{"helper": "Options: '0' =  Not Present, '1' =  GryphonGFS4400, '2' =  KeyBrdEmu"},
															"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } }
														}
													},
													/////////////////////////////////////////////////////////////// RENDERING OPTIONS APPLICATION.SERVICES.USRPASS.OTB2 ////////////////////////////////////////////////////
													"otb2":
													{
														"collapsible":true,
														"collapsed":true,
														"fields":
														{
															"spectype":{"helper": "Options: '0' =  Not Present, '1' =  Present"},
															"deepinit":{"helper": "Options: '0' =  Full Data Load Disabled, '1' =  Full Data Load Enabled"},
															"ejectmode":{"helper": "Options: '0' =  Front Partial, '1' =  Front Full, '2' =  Rear, '3' =  Bottom"},
															"communication": { "collapsible":true, "collapsed":true, "fields": { "url":{"helper": "SERIAL=COMNAME[:BOUDRATE][:DATABITS][:PARITY][:STOPBITS][:FLOWCTRL], NETWORK=IP:PORT"} } },
															"fonts":{"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true, "toolbarSticky":true},
															"logos":{"collapsible":true, "collapsed":true, "type":"table","showActionsColumn":true, "toolbarSticky":true},
															"rois":{"collapsible":true, "collapsed":true, "type":"table", "showActionsColumn":true, "toolbarSticky":true}
														}
													}
												}
											}
										}
									}									
								}
							}
                        }
                    },
					"postRender": function(control) {
						setTimeout(delayedFadeOut, 500);
						$( ".help-block" ).each(function() {
							//Dump the <p>...</p> element:
							var html_dump = $(this).outerHTML();
							//Dump and remove its <i>...</i> element:
							html_dump = $(this).children("i:first").outerHTML();
							$(this).children("i:first").remove();
							//Dump the <p>...</p> element without the inner <i>...</i>:
							var html_dump = $(this).outerHTML();
							//Get the helper message:
							var helper_msg = this.innerHTML;
							var new_helper_node = '<span data-toggle="tooltip" data-placement="top" data-delay="{ show: 1, hide: 5000}" title="' + helper_msg + '" style="padding-left:20px"><i class="alpaca-icon-16 glyphicon glyphicon-info-sign"/></span>';
							$(this).parent().children("legend:first").append(new_helper_node);
							$(this).parent().children("label:first").append(new_helper_node);
							$(this).empty();
						});
					}
                });
            });
        </script>
    </body>
</html>